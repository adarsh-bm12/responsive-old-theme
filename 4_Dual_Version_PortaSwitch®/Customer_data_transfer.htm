<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head>

  <script type="text/javascript" language="JavaScript">
    //<![CDATA[
    function reDo() {
      if (innerWidth != origWidth || innerHeight != origHeight)
        location.reload();
    }
    if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
      origWidth = innerWidth;
      origHeight = innerHeight;
      onresize = reDo;
    }
    onerror = null;
  //]]>
  </script>
  <style type="text/css">/*<![CDATA[*/

    < !-- div.WebHelpPopupMenu {
      position: absolute;
      left: 0px;
      top: 0px;
      z-index: 4;
      visibility: hidden;
    }

    p.WebHelpNavBar {
      text-align: right;
    }

    -->
  
/*]]>*/</style>

  <script type="text/javascript">//<![CDATA[

    gRootRelPath = "..";
    gCommonRootRelPath = "..";
    gTopicId = "5.2";
  
//]]></script>

  <script type="text/javascript" src="../template/scripts/rh.min.js"></script>
  <script type="text/javascript" src="../template/scripts/common.min.js"></script>
  <script type="text/javascript" src="../template/scripts/topic.min.js"></script>
  <script type="text/javascript" src="../template/scripts/topicwidgets.min.js"></script>
<script type="text/javascript" src="../whxdata/projectsettings.js"></script>
  <link rel="stylesheet" type="text/css" href="../template/styles/topic.min.css"/>
  <link rel="stylesheet" type="text/css" href="../template/Port/topicheader.css"/>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="generator" content="Adobe RoboHelp 2019"/>
  <title>Customer data transfer</title>
  <meta name="topic-status" content="Draft"/>

  <meta charset="UTF-8"/>
  <title>Customer data transfer</title>
  <meta name="generator" content="Adobe RoboHelp 2019"/>
  <link rel="stylesheet" href="../assets/css/new_css.css"/>
  <link rel="stylesheet" href="../assets/css/PortaSwitch_Concepts_MR89-01-AD.css"/>
</head>

<body>
  <div class="topic-header rh-hide" id="rh-topic-header" onclick="rh._.goToFullLayout()">
    <div class="logo">
    </div>
    <div class="nav">
      <div class="title" title="Customer data transfer">
        <span>Customer data transfer</span>
      </div>
      <div class="gotohome" title="Click here to see this page in full context">
        <span>Click here to see this page in full context</span>
      </div>
    </div>
  </div>
  <div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div>



  <div>
    <h2 class="Heading2"><a id="Customer_data_transfer"></a>Customer data transfer</h2>
    <p>Using Porter functionality, you can transfer some of your existing customers to the target system and immediately run services there with minimum reconfiguration efforts.</p>
    <p> </p>
    <p><img alt="Dual-version PortaSwitch" src="../assets/images/PortaSwitch_Concepts_MR89-01-AD_files/image29.png" data-rhwidget="Basic" data-popupimage="../assets/images/PortaSwitch_Concepts_MR89-01-AD_files/image29.png" class="popup-image-thumbnail" width="750"/></p>
    <p> </p>
    <p>Porter is a script with which you export a customer’s service and billing configurations and all of the dependent entities (accounts, products, service features, xDRs, invoices, etc.) from a previous “source” system and import them into the target.</p>
    <p class="redNote"><strong>NOTE</strong>: You must have the Root access level to perform the data transfer.</p>
    <p>As a result, the following data is transferred:</p>
    <div align="left">
      <table class="NormalTable">
        <tbody>
          <tr>
            <th>
              <p class="TableRowTitle">Entity</p>
            </th>
            <th>
              <p class="TableRowTitle">Transferred Data</p>
            </th>
          </tr>
          <tr>
            <td class="description">
              <p class="TableParagraph" style="margin:0px"><strong>Customer</strong></p>
            </td>
            <td>
              <p class="TableParagraph">Customers’ configuration:</p>
              <ul>
                <li>
                  <p class="ListParagraph">Customers and their accounts.</p>
                </li>
                <li>
                  <p class="ListParagraph">Customer and account service features.</p>
                </li>
                <li>
                  <p class="ListParagraph">xDRs.</p>
                </li>
                <li>
                  <p class="ListParagraph">Invoices.</p>
                </li>
                <li>
                  <p class="ListParagraph">Payment methods.</p>
                </li>
                <li>
                  <p class="ListParagraph">Customer sites.</p>
                </li>
                <li>
                  <p class="ListParagraph">IP Centrex elements – extensions, huntgroups and call queues.</p>
                </li>
                <li>
                  <p class="ListParagraph">Customer credit limit and payment history.</p>
                </li>
                <li>
                  <p class="ListParagraph">CPE and SIM inventory records.</p>
                </li>
              </ul>
              <p class="TableParagraph">Generic configuration:</p>
              <ul>
                <li>
                  <p class="ListParagraph">Custom access levels.</p>
                </li>
                <li>
                  <p class="ListParagraph">Customer classes.</p>
                </li>
                <li>
                  <p class="ListParagraph">Customer products and product groups.</p>
                </li>
                <li>
                  <p class="ListParagraph">Customer tariffs and rates.</p>
                </li>
                <li>
                  <p class="ListParagraph">Spending plans.</p>
                </li>
                <li>
                  <p class="ListParagraph">Subscriptions.</p>
                </li>
                <li>
                  <p class="ListParagraph">Volume discount plans and counters.</p>
                </li>
                <li>
                  <p class="ListParagraph">Dialing rules.</p>
                </li>
                <li>
                  <p class="ListParagraph">Fraud traffic profiles.</p>
                </li>
                <li>
                  <p class="ListParagraph">Custom reports</p>
                </li>
                <li>
                  <p class="ListParagraph">Call records.</p>
                </li>
              </ul>
            </td>
          </tr>
          <tr>
            <td class="description">
              <p class="TableParagraph" style="margin:0px"><strong>Vendor</strong></p>
            </td>
            <td class="description">
              <ul style="margin:0px">
                <li>
                  <p class="ListParagraph">Vendors and connections.</p>
                </li>
                <li>
                  <p class="ListParagraph">Vendor DID batches.</p>
                </li>
                <li>
                  <p class="ListParagraph">Vendor tariffs and rates.</p>
                </li>
                <li>
                  <p class="ListParagraph">Vendor xDRs</p>
                </li>
              </ul>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <p> </p>
    <p>By default, customer xDRs that pertain to the current billing period are transferred. However, you can reconfigure Porter to transfer all of a customer’s xDRs, if necessary.</p>
    <p><strong>TIP</strong>: To enable customers to use the services in the target system sooner, you can perform two-phase data transfer: first transfer customers without their xDRs. Then, transfer these customers’ xDRs with the second run of Porter.</p>
    <p><strong>Reseller </strong>data is similarly transferred: the reseller configuration and that of their customers and subresellers is transferred.</p>
    <p>To preserve bilateral traffic exchange for <strong>vendors</strong>, pre-configure them as customers on the target system.</p>
    <p>For the administrator’s convenience, the following <strong>general </strong><strong>configuration </strong>data can be separately transferred (either assigned or not to a customer or an account):</p>
    <ul class="List10" data-start="8" xmlns="">
      <li>
        <p class="ListParagraph">Products;</p>
      </li>
      <li>
        <p class="ListParagraph">Subscriptions;</p>
      </li>
      <li>
        <p class="ListParagraph">Volume discount plans;</p>
      </li>
      <li>
        <p class="ListParagraph">Tariffs and rates;</p>
      </li>
      <li>
        <p class="ListParagraph">Customer classes;</p>
      </li>
      <li>
        <p class="ListParagraph">DID pricing batches and DID groups;</p>
      </li>
      <li>
        <p class="ListParagraph">Custom field names;</p>
      </li>
      <li>
        <p class="ListParagraph">Destinations;</p>
      </li>
      <li>
        <p class="ListParagraph">Destination groups and destination group sets;</p>
      </li>
      <li>
        <p class="ListParagraph">Nodes.</p>
      </li>
    </ul>
    <p class="redNote"><strong>NOTE</strong>: Customer .csv files with xDRs and voicemail messages as well as .csv files with custom report results are not transferred by Porter.</p>
    <p>Porter operates in interactive mode. This means that if during a data transfer some entity appears to already exist in the production system (e.g. you transferred the product earlier), you may choose to use this entity or create a new one.</p>
    <p>When transferred, a customer and their accounts acquire the <img alt="Exported" height="17.3" src="../assets/images/PortaSwitch_Concepts_MR89-01-AD_files/image30.png" width="16.3"/> <strong>Exported </strong>status in the source system. This means
      that customer service provisioning and billing is stopped. As soon as the administrator imports the customer, it resumes in the target system.</p>
    <p>To reduce this downtime, during which a customer is “in-between” systems and cannot use the services, Porter creates a lineup of entities to transfer and processes them one by one. In other words, it exports customer A’s data from the source system
      and immediately imports it to the target. Then it repeats that same procedure to transfer customer B, etc.</p>
    <p class="redNote"><strong>NOTE</strong>: If customer accounts were registered on the PortaSIP® server during the data transfer, they are displayed as registered until the time of their registration expires.</p>
    <p>For the data transfer to take place, the following entities must be pre-configured in the target system:</p>
    <ul>
      <li>
        <p class="ListParagraph">A PortaBilling® root user;</p>
      </li>
      <li>
        <p class="ListParagraph">Users for your staff members;</p>
      </li>
      <li>
        <p class="ListParagraph">Currencies;</p>
      </li>
      <li>
        <p class="ListParagraph">Payment systems;</p>
      </li>
      <li>
        <p class="ListParagraph">Templates (invoice, tariff upload/download);</p>
      </li>
      <li>
        <p class="ListParagraph">Taxation methods;</p>
      </li>
      <li>
        <p class="ListParagraph">Off-peak periods.</p>
      </li>
    </ul>
    <p>These functionalities must also be pre-configured in the target system if a customer or an account uses them:</p>
    <ul>
      <li>
        <p class="ListParagraph">Routing plans.</p>
      </li>
      <li>
        <p class="ListParagraph">Routing categories.</p>
      </li>
      <li>
        <p class="ListParagraph">Routing criteria.</p>
      </li>
      <li>
        <p class="ListParagraph">Service policies.</p>
      </li>
      <li>
        <p class="ListParagraph">Internet access policies.</p>
      </li>
      <li>
        <p class="ListParagraph">Geo-risk profiles.</p>
      </li>
      <li>
        <p class="ListParagraph">CPE profiles.</p>
      </li>
      <li>
        <p class="ListParagraph">Fraud traffic profiles.</p>
      </li>
      <li>
        <p class="ListParagraph">Voice applications.</p>
      </li>
    </ul>
    <p> </p>
    <p><img alt="Attention" height="26.2" src="../assets/images/PortaSwitch_Concepts_MR89-01-AD_files/image31.png" style="float: left; padding-right: 15px;" width="29.1"/>Any custom configuration that is defined in the source system (e.g. custom notification
      templates) must be pre-configured in the target system as well.</p>
    <h5><a id="Call_records_synchronization"></a><em>Call records synchronization</em></h5>
    <p>Dual Version PortaSwitch® provides a mechanism for automatic synchronization of call records between source and target systems. As a result, you can access and download the call records in the Dual Version PortaSwitch® system regardless of the system
      (source or target) on which they were initially created.</p>
    <p>Dual Version PortaSwitch® maintains the service integrity for your customers through constant synchronization of their call records with the help of a script that runs on the target system on set intervals of time.</p>
    <p>When a new call record appears in the source system, the file is synchronized with the target system with the help of the script, even if the corresponding customer wasn’t migrated to the target system yet. When the customer finally fully migrates
      to the target system, all call records will already be present there.</p>
    <h5><a id="Parallel_processing_mode"></a><em>Parallel processing mode</em></h5>
    <p>Porter can migrate several customers in parallel, which allows you to increase data migration performance.</p>
    <p class="ListBullet5"> </p>
    <p>To enable parallel processing for Porter, the number of threads for data migration must be defined in the Porter configuration. This maximum thread number depends on the server’s processing capacity and the load caused by other operations running
      on that same server. Contact PortaOne Support to evaluate the number of threads available for Porter in your installation.</p>
    <h4 class="Heading4"><a id="Reverse_transfer_of_customer_xDRs"></a>Reverse transfer of customer xDRs</h4>
    <p>Customers may face issues with the target system after the transfer. If these issues should require deep investigation, an administrator can restore the customer on the source system.</p>
    <p>To do this, the administrator runs the Retrop tool on the target system where the script performs a reverse transfer of customer xDRs as follows:</p>
    <ul>
      <li>
        <p class="ListParagraph">first it analyzes the customer xDRs on both systems to find which ones of them can be returned (i.e. for services and entities that exist in both systems),</p>
      </li>
      <li>
        <p class="ListParagraph">it marks the customer record as Exported in the target system,</p>
      </li>
      <li>
        <p class="ListParagraph">then it imports the xDRs to the source system, and finally,</p>
      </li>
      <li>
        <p class="ListParagraph">it lifts the Exported status from the customer record in the source system,</p>
      </li>
      <li>
        <p class="ListParagraph">adjusts the customer’s balance so that it corresponds to the customer’s balance on the target system. If the customer has debit accounts their balance is also adjusted.</p>
      </li>
    </ul>
    <p>If the customer has used the services on the target system and therefore has new xDRs, Retrop generates the report for the administrator. The administrator then uses that to adjust the customer balance manually.</p>
    <p>Note that a reverse transfer of customer xDRs must be treated as an emergency measure due to the following limitations:</p>
    <ol>
      <li>
        <p class="ListParagraph">The xDRs must be returned before the customer’s billing period closes to avoid double charging, taxing and invoicing.</p>
      </li>
      <li>
        <p class="ListParagraph">When restoring the customer record on the source system, the service configuration will be rolled back. This means that any configuration changes done on the target system (e.g. new service enabled) will be lost.</p>
      </li>
      <li>
        <p class="ListParagraph">If the administrator has terminated the customer in the source system, the Retrop tool will not be able to perform a reverse xDR transfer.</p>
      </li>
      <li>
        <p class="ListParagraph">If the administrator terminates a customer’s account in the target system but the account still exists in the source one, the account will remain active after the Retrop tool performs a reverse xDR transfer and lifts the Exported status from the
          customer in the source system.</p>
      </li>
    </ol>
    <h4 class="Heading4"><a id="Cleanup_of_exported_customer_data"></a>Cleanup of exported customer data</h4>
    <p>If you migrated some customers to the target system for testing purposes and later wish to return them to the source system, you need to remove the exported customer data.</p>
    <p>To do this, use the Cleaner tool. Cleaner is a script that collects customer data and all its dependent entities and then deletes their records from the database. You can run Cleaner from either system in Dual Version PortaSwitch®, however, you must
      define beforehand where the data is to be removed from.</p>
    <p>Thus, with Cleaner you can remove the following entities:</p>
    <ul>
      <li>
        <p class="ListParagraph">Customers,</p>
      </li>
      <li>
        <p class="ListParagraph">Distributors,</p>
      </li>
      <li>
        <p class="ListParagraph">Products,</p>
      </li>
      <li>
        <p class="ListParagraph">Resellers,</p>
      </li>
      <li>
        <p class="ListParagraph">Tariffs,</p>
      </li>
      <li>
        <p class="ListParagraph">Vendors,</p>
      </li>
      <li>
        <p class="ListParagraph">Access levels,</p>
      </li>
      <li>
        <p class="ListParagraph">DID numbers,</p>
      </li>
      <li>
        <p class="ListParagraph">SIM cards, and</p>
      </li>
      <li>
        <p class="ListParagraph">CPE.</p>
      </li>
    </ul>
    <p>Similar to Porter, Cleaner allows you to delete entities one by one or several at a time. This ability to delete unnecessary data facilitates troubleshooting and optimizes the overall management of Dual Version PortaSwitch®.</p>
    <p>Cleaner is designed to remove only data that has been transferred. Therefore, do not use it for simple system cleaning.</p>
  </div>

</body></html>