<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head>

  <script type="text/javascript" language="JavaScript">
    //<![CDATA[
    function reDo() {
      if (innerWidth != origWidth || innerHeight != origHeight)
        location.reload();
    }
    if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
      origWidth = innerWidth;
      origHeight = innerHeight;
      onresize = reDo;
    }
    onerror = null;
  //]]>
  </script>
  <style type="text/css">/*<![CDATA[*/

    < !-- div.WebHelpPopupMenu {
      position: absolute;
      left: 0px;
      top: 0px;
      z-index: 4;
      visibility: hidden;
    }

    p.WebHelpNavBar {
      text-align: right;
    }

    -->
  
/*]]>*/</style>

  <script type="text/javascript">//<![CDATA[

    gRootRelPath = "..";
    gCommonRootRelPath = "..";
    gTopicId = "2.1";
  
//]]></script>

  <script type="text/javascript" src="../template/scripts/rh.min.js"></script>
  <script type="text/javascript" src="../template/scripts/common.min.js"></script>
  <script type="text/javascript" src="../template/scripts/topic.min.js"></script>
  <script type="text/javascript" src="../template/scripts/topicwidgets.min.js"></script>
<script type="text/javascript" src="../whxdata/projectsettings.js"></script>
  <link rel="stylesheet" type="text/css" href="../template/styles/topic.min.css"/>
  <link rel="stylesheet" type="text/css" href="../template/Port/topicheader.css"/>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="generator" content="Adobe RoboHelp 2019"/>
  <title>Centralized configuration management</title>
  <meta name="topic-status" content="Draft"/>

  <meta charset="UTF-8"/>
  <title>Centralized configuration management</title>
  <meta name="generator" content="Adobe RoboHelp 2019"/>
  <link rel="stylesheet" href="../assets/css/new_css.css"/>
  <link rel="stylesheet" href="../assets/css/PortaSwitch_Concepts_MR89-01-AD.css"/>
</head>

<body>
  <div class="topic-header rh-hide" id="rh-topic-header" onclick="rh._.goToFullLayout()">
    <div class="logo">
    </div>
    <div class="nav">
      <div class="title" title="Centralized configuration management">
        <span>Centralized configuration management</span>
      </div>
      <div class="gotohome" title="Click here to see this page in full context">
        <span>Click here to see this page in full context</span>
      </div>
    </div>
  </div>
  <div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div>



  <div>
    <h2 class="Heading2">Centralized configuration management</h2>
    <p>In order to efficiently maintain large PortaSwitch® installations (which may involve 10 or more servers), it is essential to have a unified interface for managing all the configuration data. Tasks such as IP address changes, relocating services to
      different physical servers, or simply changing an option that affects functionality can then be performed quickly and easily, with a minimal chance of error.</p>
    <p>Configuration server carries out exactly this task, providing an interface for the administrator to view the current configuration, create a new configuration and correctly apply it to all servers, or rollback to an old configuration if a problem
      has been detected. Another important role of the Configuration server is that it stores “images” of different versions of the software. Each image is the actual content (in a binary format) of a specific version of the software code (e.g. Maintenance
      Release 75, build 1). When a specific image is loaded, the server will operate under the corresponding software release.</p>
    <h3 class="Heading3"><a id="Concepts"></a>Concepts</h3>
    <p>There are several important concepts involved in the configuration management framework. Configuration management is designed to work in the same way whether it is controlling just a single PortaBilling® installation (four servers) or a PortaSwitch®
      Clustered (nine servers). In the rest of this section, we will use some examples related to managing the full PortaSwitch® configuration (five servers), so as to better illustrate the capabilities of the configuration framework.</p>
    <h4 class="Heading4"><a id="Server"></a>Server</h4>
    <p>A server is an atomic element of processing capacity. It is either a single physical server, or a separate virtual machine, if virtualization is used. In other words, it is basically a host on which PortaSwitch® software can be installed and operated.
      A server has attributes such as a number of available CPUs, disk space, and so on.</p>
    <h4 class="Heading4"><a id="Private_cloud"></a>Private cloud</h4>
    <p>Several servers within the same PortaSwitch® installation make up a private cloud environment. They all run the same version of the software and, apart from differences in the available hardware resources (e.g. one server has a faster CPU), they are
      completely interchangeable – i.e. a PortaSwitch® software component that can run on server A can also run on server B.</p>
    <h4 class="Heading4"><a id="Instance"></a>Instance</h4>
    <p>An instance is a copy of an application (e.g. OCS server) configured in a particular way and running on a server, i.e. it is a combination of the software code, configuration data, and running processes that provides an actual service. For example,
      a PortaBilling® OCS instance with IP address 1.2.3.4 may be created on server ABC. Or three instances of PortaSIP® processing node may be created on server XYZ. They all have different IP addresses, and may differ in other configuration parameters,
      e.g. one of them has the “start accounting” option turned on while the other two have it turned off.</p>
    <h4 class="Heading4"><a id="Application_Server"></a>Application server</h4>
    <p>An application server is a server with one or more running application instances of a certain type. For example, three instances of PortaSIP® processing nodes are running on server ABC and one instance of PortaSIP® processing node and one instance
      of the billing engine are running on server XYZ. In this case you have two PortaSIP® application servers and one billing engine application server.</p>
    <h4 class="Heading4"><a id="Option"></a>Option</h4>
    <p>An option is a configuration parameter which alters the system’s functionality. Some examples of options would be “When should statistics generation be done,” or “Should the previous balance be included in the invoice’s amount due.” Depending on an
      option, you can set its value by selecting it from a list, or by typing it into a text field.</p>
    <p>For convenience in administration, a default value is provided for most of the options, so that you do not have to supply a value for every single option in order to make the system work.</p>
    <h4 class="Heading4"><a id="Configuration_tree"></a>Configuration tree</h4>
    <p>The full system configuration includes hundreds of different options, so it would certainly be inconvenient to work with them as a single list. Thus options are grouped together in a tree-like structure.</p>
    <p><img alt="Configuration tree" src="../assets/images/PortaSwitch_Concepts_MR89-01-AD_files/image3.png" data-rhwidget="Basic" data-popupimage="../assets/images/PortaSwitch_Concepts_MR89-01-AD_files/image3.png" class="popup-image-thumbnail" width="1000"/></p>
    <p>There are global options at the top level of the tree (<strong>PortaSwitch</strong> (1)), i.e. those that have an effect on all of the components of the system.</p>
    <p>Beneath the global level is the application level (2). Each application is presented as a separate node in the configuration tree. These nodes can be grouped under bigger logical nodes, i.e. sip-cluster nodes are grouped under the <strong>PortaSIP Cluster</strong>      node, which is itself is a subnode of <strong>ClusterSuite</strong>.</p>
    <p>Thus, in order to change the <strong>allow_reauth</strong> option (which is related to the PortaBilling® application), you would go to the desired sip-cluster node of the PortaBilling® Cluster: <strong>PortaSwitch→Cluster Suite→PortaSIP Cluster→sip-cluster@193.168.1.17→MUB2bua</strong>.</p>
    <p>Finally, there is the instance level (3), which covers options related to a specific instance.</p>
    <p>For example, in order to change the <strong>Time_Zone</strong> option for the porta-billing-web instance with IP address 193.28.87.21, you would go <strong>PortaSwitch→Admin→porta-billing-web-1@193.168.1.17</strong><strong></strong>.</p>
    <p><img alt="Configuration level - instance" src="../assets/images/PortaSwitch_Concepts_MR89-01-AD_files/image4.png" data-rhwidget="Basic" data-popupimage="../assets/images/PortaSwitch_Concepts_MR89-01-AD_files/image4.png" class="popup-image-thumbnail" width="1000"/></p>
    <p>Some options may have different values in different virtual environments. These options are organized into environment sets, and each set provides control for options that are specific to a particular virtual environment. Virtual environments have
      their own hierarchy; the <strong>Global</strong> set (4)<span lang="uk-UA"> </span>is the highest level and individual virtual environments (5) represent the lower level.</p>
    <p>Since there are normally many individual options available at each level, for management’s convenience, the options are split into groups (6), and each group contains a small set of options that is related to a single software module or feature.</p>
    <p>When the value for an option is defined at a certain level, it is automatically propagated to all of the levels beneath it – if no value is directly specified for this option at a lower level.</p>
    <p>This means that the Configuration server chooses which value to use according to the following rule:</p>
    <ul class="List55">
      <li>
        <p class="ListParagraph">If you specify an option value at a lower level, the Configuration server uses this value and ignores the data specified at a higher level;</p>
      </li>
      <li>
        <p class="ListParagraph">If you leave the option value at a lower level undefined,<span lang="uk-UA"> </span>the Configuration server uses the <em>default </em>value – that is, the one specified at a higher level.</p>
      </li>
    </ul>
    <p>Consider the following example.</p>
    <p>In the <strong>Configuration Tree</strong> panel you can go to the <strong>PortaSwitch→Admin</strong> node and in the <strong>Global</strong> set specify 14 as the default value for the <strong>DaysToExpireNotification </strong>option (you can find
      this option in the <strong>Cards </strong>option group).</p>
    <p><img alt="Configuration - node level" src="../assets/images/PortaSwitch_Concepts_MR89-01-AD_files/image5.png" data-rhwidget="Basic" data-popupimage="../assets/images/PortaSwitch_Concepts_MR89-01-AD_files/image5.png" class="popup-image-thumbnail" width="1000"/></p>
    <p>This value then becomes the default value for all of the virtual environments (those that exist and those not yet created), and PortaBilling® will send notifications to customers about their card expiration 14 days before the expiration date.</p>
    <p>However, if you need to notify customers in one of your billing environments (e.g. pb) 10 days before their cards expire, set the <strong>DaysToExpireNotification</strong> option value to 10, exclusively for this environment.</p>
    <h4 class="Heading4"><a id="Multiple_configurations"></a>Multiple configurations</h4>
    <p>When a configuration is saved, this stores all the options in it – so every stored configuration contains a complete set of data for operating all PortaSwitch® components. In order to preserve system integrity it is not possible to directly alter
      the active configuration (the one currently applied to the servers).</p>
    <p>In the case of changes not producing the desired result, it is always possible to roll the system back to its original, stable state.</p>
    <p>The process of changing the system configuration is thus divided into several steps:</p>
    <ol class="List32" data-start="1" xmlns="">
      <li>
        <p class="ListParagraph">Clone the current configuration tree into a new one.</p>
      </li>
      <li>
        <p class="ListParagraph">Make the required changes.</p>
      </li>
      <li>
        <p class="ListParagraph">Now apply this configuration to the system so that it becomes the <strong>active</strong> one.</p>
      </li>
    </ol>
    <h4 class="Heading4"><a id="Applying_the_configuration"></a>Applying the configuration</h4>
    <p>Every server in PortaSwitch® runs a configuration update agent, which follows commands from the Configuration server. When a configuration update is received, the agent updates the local files, restarts the processes and does everything else required
      to put the changes into effect.</p>
  </div>

</body></html>